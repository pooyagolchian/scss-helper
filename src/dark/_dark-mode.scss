// =============================================================================
// Dark Mode Utilities
//
// Dual-strategy dark mode:
//   [data-theme="dark"]                — JS-controlled toggle
//   @media (prefers-color-scheme: dark) — OS preference
//
// Usage:
//   .card { @include dark-mode { background: #1a1a1a; } }
//   <div class="sh-dark-text-white">…</div>
// =============================================================================
@use "../variables" as vars;

// Core mixin — scope any block to dark mode contexts
@mixin dark-mode {
  [data-theme="dark"] & { @content; }

  @media (prefers-color-scheme: dark) {
    [data-theme]:not([data-theme="light"]) &,
    :not([data-theme]) & { @content; }
  }
}

// Dark token overrides — semantic colors shift for dark backgrounds
[data-theme="dark"] {
  --color-primary:   #60a5fa;
  --color-secondary: #9ca3af;
  --color-success:   #4ade80;
  --color-info:      #38bdf8;
  --color-warning:   #fbbf24;
  --color-danger:    #f87171;
  --color-light:     #374151;
  --color-dark:      #f9fafb;
}

@media (prefers-color-scheme: dark) {
  :not([data-theme="light"]) {
    --color-primary:   #60a5fa;
    --color-secondary: #9ca3af;
    --color-success:   #4ade80;
    --color-info:      #38bdf8;
    --color-warning:   #fbbf24;
    --color-danger:    #f87171;
    --color-light:     #374151;
    --color-dark:      #f9fafb;
  }
}

// Dark utility classes palette
$dark-palette: (
  "white":      #ffffff,
  "black":      #000000,
  "gray-50":    #f9fafb,
  "gray-100":   #f3f4f6,
  "gray-200":   #e5e7eb,
  "gray-700":   #374151,
  "gray-800":   #1f2937,
  "gray-900":   #111827,
  "primary":    #60a5fa,
  "secondary":  #9ca3af,
  "success":    #4ade80,
  "info":       #38bdf8,
  "warning":    #fbbf24,
  "danger":     #f87171,
) !default;

// Utility classes — work under both JS toggle and OS preference
[data-theme="dark"] {
  @each $name, $value in $dark-palette {
    .#{vars.$prefix}dark-text-#{$name} { color: $value; }
    .#{vars.$prefix}dark-bg-#{$name}   { background-color: $value; }
  }
}

@media (prefers-color-scheme: dark) {
  :not([data-theme="light"]) {
    @each $name, $value in $dark-palette {
      .#{vars.$prefix}dark-text-#{$name} { color: $value; }
      .#{vars.$prefix}dark-bg-#{$name}   { background-color: $value; }
    }
  }
}
