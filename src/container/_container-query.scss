// =============================================================================
// Container Query Helpers
//
// Makes it easy to use CSS Container Queries (@container) for component-level
// responsive behavior.
//
// Usage:
//   <div class="sh-cq">
//     <div class="sh-c-col-6-sm">…</div>
//   </div>
//
// Mixin:
//   .card { @include container-bp('card', sm) { font-size: 1.25rem; } }
// =============================================================================
@use "sass:map";
@use "../variables" as vars;

// Container-type utility classes
.#{vars.$prefix}cq        { container-type: inline-size; }
.#{vars.$prefix}cq-size   { container-type: size; }
.#{vars.$prefix}cq-normal { container-type: normal; }

// Mixin: wrap content in a @container rule using the $breakpoints scale
// @param $name      — container name (or 'none' for unnamed containers)
// @param $breakpoint — key from $breakpoints map
@mixin container-bp($name, $breakpoint) {
  $size: map.get(vars.$breakpoints, $breakpoint);
  @if $name == none {
    @container (min-width: #{$size}) { @content; }
  } @else {
    @container #{$name} (min-width: #{$size}) { @content; }
  }
}

// Responsive grid columns using @container (prefix: sh-c-)
.#{vars.$prefix}cq {
  @each $bp-name, $bp-size in vars.$breakpoints {
    @container (min-width: #{$bp-size}) {
      @for $i from 1 through 12 {
        .#{vars.$prefix}c-col-#{$i}-#{$bp-name} {
          --span: #{$i};
        }
      }
    }
  }
}
